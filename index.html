<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nueva Humanidad</title>
<style>
  body {
    background-color: #E8F5E9; /* verde pastel claro */
    font-family: 'Segoe UI', sans-serif;
    max-width: 700px;
    margin: auto;
    padding: 20px;
    color: #4a4a4a;
  }

  .logo {
    display: block;
    margin: 20px auto;
    width: 140px;
  }

  h2 {
    text-align: center;
    color: #3E7C59; /* verde m√°s oscuro */
    margin-bottom: 10px;
  }

  label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
    color: #3E7C59;
  }

  input, select, button, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
  }

  select[multiple] {
    height: auto;
    min-height: 90px;
  }

  .extra-input {
    display: none;
    margin-top: 8px;
  }

  button {
    background-color: #CBA4E6; /* violeta pastel */
    border: none;
    color: white;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
  }

  button:hover {
    background-color: #B68DDC;
  }

  .checkbox-wrapper {
    margin-top: 20px;
    display: flex;
    align-items: center;
  }

  .checkbox-wrapper input {
    width: auto;
    margin-right: 10px;
  }

  .warning {
    color: red;
    font-size: 0.9em;
  }

  .suggestions {
    border: 1px solid #ccc;
    border-top: none;
    background: white;
    position: absolute;
    z-index: 1000;
    width: calc(100% - 22px);
    display: none;
    max-height: 150px;
    overflow-y: auto;
  }

  .suggestion-item {
    padding: 10px;
    cursor: pointer;
  }

  .suggestion-item:hover {
    background-color: #f5f5f5;
  }

  .city-container {
    position: relative;
  }
</style>
</head>
<body>
  <img src="https://amjskrqaoiuabscecmji.supabase.co/storage/v1/object/public/fotocc/UNH_iso.png" alt="Logo Nueva Humanidad" class="logo">
  <h2>Nueva Humanidad</h2>

  <form id="formNH">

    <!-- Datos personales -->
    <label>Nombre:</label>
    <input type="text" name="nombre" required>

    <label>Apellido:</label>
    <input type="text" name="apellido" required>

    <label>Nombre que te gustar√≠a figure :</label>
    <input type="text" name="nombrecc" required>

    <label>Fecha de nacimiento:</label>
    <input type="date" name="fecha_nac" required>

    <label>Hora de nacimiento:</label>
    <input type="time" name="hora_nac" required>

    <!-- Ciudad nacimiento -->
    <label>Ciudad de nacimiento:</label>
    <div class="city-container">
      <input id="ciudad" name="ciudad" type="text" autocomplete="off" required>
      <div id="suggestions-ciudad" class="suggestions"></div>
    </div>
    <div id="warning-ciudad" class="warning"></div>
    <label>Provincia:</label>
    <input id="provincia" name="provincia" type="text">
    <label>Pa√≠s:</label>
    <input id="pais" name="pais" type="text">

    <!-- Ciudad residencia -->
    <label>Ciudad de residencia:</label>
    <div class="city-container">
      <input id="ciudad_resi" name="ciudad_resi" type="text" autocomplete="off" required>
      <div id="suggestions-resi" class="suggestions"></div>
    </div>
    <div id="warning-resi" class="warning"></div>
    <label>Provincia de residencia:</label>
    <input id="provincia_resi" name="provincia_resi" type="text">
    <label>Pa√≠s de residencia:</label>
    <input id="pais_resi" name="pais_resi" type="text">

    <!-- Email y tel√©fono -->
    <label>Email:</label>
    <input type="email" name="email" required>
    <label>Tel√©fono:</label>
    <input type="tel" name="telefono">

    <!-- Foto -->
    <label>Foto (JPG/PNG, m√°x. 1000KB):</label>
    <input type="file" name="foto" accept="image/png, image/jpeg">

    <!-- Campos ocultos -->
    <input type="hidden" id="lat" name="lat">
    <input type="hidden" id="lon" name="lon">


    <!-- Nuevos campos -->
    <label>Estudi√© o me form√© en...</label>
    <select id="formacion" name="formacion[]" multiple>
      <option value="Psicolog√≠a">Psicolog√≠a</option>
      <option value="Educaci√≥n">Educaci√≥n</option>
      <option value="Ciencias Sociales">Ciencias Sociales</option>
      <option value="Salud">Salud</option>
      <option value="Arte">Arte</option>
      <option value="Tecnolog√≠a">Tecnolog√≠a</option>
      <option value="Otro">Otro</option>
    </select>
    <input type="text" id="otroFormacion" class="extra-input" name="otroFormacion" placeholder="Especifica otra formaci√≥n">

    <label>Me apasiona...</label>
    <select id="talentos" name="talentos[]" multiple>
      <optgroup label="Talentos emocionales">
        <option value="Escuchar profundamente">Escuchar profundamente</option>
        <option value="Cuidar a otros">Cuidar a otros</option>
        <option value="Sostener v√≠nculos">Sostener v√≠nculos</option>
      </optgroup>
      <optgroup label="Talentos mentales">
        <option value="Analizar informaci√≥n">Analizar informaci√≥n</option>
        <option value="Organizar procesos">Organizar procesos</option>
      </optgroup>
      <optgroup label="Talentos f√≠sicos">
        <option value="Cocinar con amor">Cocinar con amor</option>
        <option value="Bailar">Bailar</option>
      </optgroup>
      <option value="Otro">Otro</option>
    </select>
    <input type="text" id="otroTalento" class="extra-input" name="otroTalento" placeholder="Especifica otro talento">

    <label>He trabajado como...</label>
    <select id="profesiones" name="profesiones[]" multiple>
      <option value="Docente">Docente</option>
      <option value="Terapeuta">Terapeuta</option>
      <option value="Comerciante">Comerciante</option>
      <option value="Otro">Otro</option>
    </select>
    <input type="text" id="otraProfesion" class="extra-input" name="otraProfesion" placeholder="Especifica otra profesi√≥n">

    <label>En este momento me siento‚Ä¶</label>
    <div>
      <input type="radio" name="estado" value="Opcion1" required> Transitando el puente hacia la Nueva Humanidad, sanando heridas emocionales, equilibrando las energ√≠as masculina y femenina, reprogramando creencias de miedo y aline√°ndome a la Verdad del Ser que Yo Soy.
      <br><br>
      <input type="radio" name="estado" value="Opcion2" required> Entregad@ a la materializaci√≥n de la Nueva Humanidad y sintonizado a la Verdad que Yo Soy, despu√©s de haber transitado noches oscuras del alma para romper con los viejos paradigmas y disolver los personajes egoicos.
    </div>

    <label>Acced√≠ a esta encuesta por:</label>
    <select id="acceso" name="acceso" required>
      <option value="">Selecciona...</option>
      <option value="Instagram">Instagram</option>
      <option value="WhatsApp">WhatsApp</option>
      <option value="Nueva Humanidad">Colaborador NH</option>
      <option value="Colaborador CC">Colaborador CC</option>
    </select>
    <input type="text" id="nombreColaborador" class="extra-input" name="nombreColaborador" placeholder="Nombre del colaborador">

    <!-- Checkbox Pol√≠tica -->
    <div class="checkbox-wrapper">
      <input type="checkbox" id="politica" required>
      <label for="politica">Declaro haber le√≠do y aceptado la Pol√≠tica de Privacidad.</label>
    </div>

    <button type="submit">Enviar</button>
  </form>

  <p id="mensaje-exito" style="color:green; text-align:center; font-weight:bold; display:none;">üí´¬°Formulario enviado con √©xito!</p>
  <p id="mensaje-error" style="color:red; text-align:center; font-weight:bold; display:none;">Error al enviar. Intenta nuevamente.</p>

<script>
// Mostrar campos extra seg√∫n selecci√≥n
document.getElementById('formacion').addEventListener('change', function() {
  document.getElementById('otroFormacion').style.display = this.value.includes('Otro') ? 'block' : 'none';
});
document.getElementById('talentos').addEventListener('change', function() {
  document.getElementById('otroTalento').style.display = Array.from(this.selectedOptions).some(opt => opt.value === 'Otro') ? 'block' : 'none';
});
document.getElementById('profesiones').addEventListener('change', function() {
  document.getElementById('otraProfesion').style.display = Array.from(this.selectedOptions).some(opt => opt.value === 'Otro') ? 'block' : 'none';
});
document.getElementById('acceso').addEventListener('change', function() {
  const val = this.value;
  document.getElementById('nombreColaborador').style.display = ( val === 'Colaborador CC') ? 'block' : 'none';
});

// Autocompletado ciudades (igual que tu l√≥gica anterior)
const ciudadesMundo = [
  // Argentina
  {ciudad:"Buenos Aires",provincia:"Ciudad Aut√≥noma de Buenos Aires",pais:"Argentina",lat:-34.6118,lon:-58.3960},
  {ciudad:"C√≥rdoba",provincia:"C√≥rdoba",pais:"Argentina",lat:-31.4201,lon:-64.1888},
  {ciudad: "Buenos Aires", provincia: "Ciudad Aut√≥noma de Buenos Aires", pais: "Argentina", lat: -34.6118, lon: -58.3960},
  {ciudad: "C√≥rdoba", provincia: "C√≥rdoba", pais: "Argentina", lat: -31.4201, lon: -64.1888},
  {ciudad: "Rosario", provincia: "Santa Fe", pais: "Argentina", lat: -32.9442, lon: -60.6505},
  {ciudad: "La Plata", provincia: "Buenos Aires", pais: "Argentina", lat: -34.9215, lon: -57.9545},
  {ciudad: "Mar del Plata", provincia: "Buenos Aires", pais: "Argentina", lat: -38.0055, lon: -57.5426},
  {ciudad: "Mendoza", provincia: "Mendoza", pais: "Argentina", lat: -32.8895, lon: -68.8458},
  {ciudad: "Tucum√°n", provincia: "Tucum√°n", pais: "Argentina", lat: -26.8083, lon: -65.2176},
  {ciudad: "Salta", provincia: "Salta", pais: "Argentina", lat: -24.7821, lon: -65.4232},
  {ciudad: "Santa Fe", provincia: "Santa Fe", pais: "Argentina", lat: -31.6333, lon: -60.7000},

      // Espa√±a
  {ciudad: "Madrid", provincia: "Comunidad de Madrid", pais: "Espa√±a", lat: 40.4168, lon: -3.7038},
  {ciudad: "Barcelona", provincia: "Catalu√±a", pais: "Espa√±a", lat: 41.3851, lon: 2.1734},
  {ciudad: "Valencia", provincia: "Comunidad Valenciana", pais: "Espa√±a", lat: 39.4699, lon: -0.3763},
  {ciudad: "Sevilla", provincia: "Andaluc√≠a", pais: "Espa√±a", lat: 37.3891, lon: -5.9845},
  {ciudad: "Zaragoza", provincia: "Arag√≥n", pais: "Espa√±a", lat: 41.6488, lon: -0.8891},
  {ciudad: "M√°laga", provincia: "Andaluc√≠a", pais: "Espa√±a", lat: 36.7213, lon: -4.4214},
  {ciudad: "Murcia", provincia: "Regi√≥n de Murcia", pais: "Espa√±a", lat: 37.9922, lon: -1.1307},
  {ciudad: "Palma", provincia: "Islas Baleares", pais: "Espa√±a", lat: 39.5696, lon: 2.6502},
  {ciudad: "Las Palmas", provincia: "Canarias", pais: "Espa√±a", lat: 28.1248, lon: -15.4300},
  {ciudad: "Bilbao", provincia: "Pa√≠s Vasco", pais: "Espa√±a", lat: 43.2627, lon: -2.9253},
      // Francia
  {ciudad: "Par√≠s", provincia: "√éle-de-France", pais: "Francia", lat: 48.8566, lon: 2.3522},
  {ciudad: "Marsella", provincia: "Provenza-Alpes-Costa Azul", pais: "Francia", lat: 43.2965, lon: 5.3698},
  {ciudad: "Lyon", provincia: "Auvernia-R√≥dano-Alpes", pais: "Francia", lat: 45.7640, lon: 4.8357},
  {ciudad: "Toulouse", provincia: "Occitania", pais: "Francia", lat: 43.6047, lon: 1.4442},
  {ciudad: "Niza", provincia: "Provenza-Alpes-Costa Azul", pais: "Francia", lat: 43.7102, lon: 7.2620},
      // Italia
  {ciudad: "Roma", provincia: "Lacio", pais: "Italia", lat: 41.9028, lon: 12.4964},
  {ciudad: "Mil√°n", provincia: "Lombard√≠a", pais: "Italia", lat: 45.4642, lon: 9.1900},
  {ciudad: "N√°poles", provincia: "Campania", pais: "Italia", lat: 40.8518, lon: 14.2681},
  {ciudad: "Tur√≠n", provincia: "Piamonte", pais: "Italia", lat: 45.0703, lon: 7.6869},
  {ciudad: "Palermo", provincia: "Sicilia", pais: "Italia", lat: 38.1157, lon: 13.3615},
      // Reino Unido
  {ciudad: "Londres", provincia: "Inglaterra", pais: "Reino Unido", lat: 51.5074, lon: -0.1278},
  {ciudad: "Birmingham", provincia: "Inglaterra", pais: "Reino Unido", lat: 52.4862, lon: -1.8904},
  {ciudad: "Manchester", provincia: "Inglaterra", pais: "Reino Unido", lat: 53.4808, lon: -2.2426},
  {ciudad: "Glasgow", provincia: "Escocia", pais: "Reino Unido", lat: 55.8642, lon: -4.2518},
  {ciudad: "Liverpool", provincia: "Inglaterra", pais: "Reino Unido", lat: 53.4084, lon: -2.9916},

      // Alemania
  {ciudad: "Berl√≠n", provincia: "Berl√≠n", pais: "Alemania", lat: 52.5200, lon: 13.4050},
  {ciudad: "Hamburgo", provincia: "Hamburgo", pais: "Alemania", lat: 53.5511, lon: 9.9937},
  {ciudad: "M√∫nich", provincia: "Baviera", pais: "Alemania", lat: 48.1351, lon: 11.5820},
  {ciudad: "Colonia", provincia: "Renania del Norte-Westfalia", pais: "Alemania", lat: 50.9375, lon: 6.9603},
  {ciudad: "Frankfurt", provincia: "Hesse", pais: "Alemania", lat: 50.1109, lon: 8.6821},
      // Australia
  {ciudad: "S√≠dney", provincia: "Nueva Gales del Sur", pais: "Australia", lat: -33.8688, lon: 151.2093},
  {ciudad: "Melbourne", provincia: "Victoria", pais: "Australia", lat: -37.8136, lon: 144.9631},
  {ciudad: "Brisbane", provincia: "Queensland", pais: "Australia", lat: -27.4698, lon: 153.0251},
  {ciudad: "Perth", provincia: "Australia Occidental", pais: "Australia", lat: -31.9505, lon: 115.8605},
  {ciudad: "Adelaida", provincia: "Australia Meridional", pais: "Australia", lat: -34.9285, lon: 138.6007},
      // Otros pa√≠ses latinoamericanos
  {ciudad: "S√£o Paulo", provincia: "S√£o Paulo", pais: "Brasil", lat: -23.5505, lon: -46.6333},
  {ciudad: "Rio de Janeiro", provincia: "Rio de Janeiro", pais: "Brasil", lat: -22.9068, lon: -43.1729},
  {ciudad: "Bras√≠lia", provincia: "Distrito Federal", pais: "Brasil", lat: -15.8267, lon: -47.9218},
  {ciudad: "Santiago", provincia: "Regi√≥n Metropolitana", pais: "Chile", lat: -33.4489, lon: -70.6693},
  {ciudad: "Lima", provincia: "Lima", pais: "Per√∫", lat: -12.0464, lon: -77.0428},
  {ciudad: "Bogot√°", provincia: "Cundinamarca", pais: "Colombia", lat: 4.7110, lon: -74.0721},
  {ciudad: "Ciudad de M√©xico", provincia: "Ciudad de M√©xico", pais: "M√©xico", lat: 19.4326, lon: -99.1332},
  {ciudad: "Caracas", provincia: "Distrito Capital", pais: "Venezuela", lat: 10.4806, lon: -66.9036},
  {ciudad: "Quito", provincia: "Pichincha", pais: "Ecuador", lat: -0.1807, lon: -78.4678},
  {ciudad: "La Paz", provincia: "La Paz", pais: "Bolivia", lat: -16.5000, lon: -68.1193},
  {ciudad: "Asunci√≥n", provincia: "Asunci√≥n", pais: "Paraguay", lat: -25.2637, lon: -57.5759},
  {ciudad: "Montevideo", provincia: "Montevideo", pais: "Uruguay", lat: -34.9011, lon: -56.1645}
   
];

function cleanCityName(name) {
    return name.replace(/^(Municipio de |Municipality of |Province of |Provincia de )/i, '').trim();
  }

  function cleanProvinceName(name) {
      return name.replace(/( Province| provincia)$/i, '').trim();
    }

  function getCountryName(countryCode) {
    const countries = {
      'AR': 'Argentina', 'BR': 'Brasil', 'CL': 'Chile', 'UY': 'Uruguay', 'PY': 'Paraguay',
      'PE': 'Per√∫', 'BO': 'Bolivia', 'VE': 'Venezuela', 'CO': 'Colombia', 'EC': 'Ecuador',
      'MX': 'M√©xico', 'ES': 'Espa√±a', 'FR': 'Francia', 'IT': 'Italia', 'DE': 'Alemania',
      'GB': 'Reino Unido', 'AU': 'Australia', 'US': 'Estados Unidos', 'CA': 'Canad√°', 'AD': 'Andorra'
    };
    return countries[countryCode] || countryCode;
  }
function setupCityAutocomplete(inputId, suggestionsId, provId, paisId, latId, lonId, warnId) {
  const input = document.getElementById(inputId);
  const suggestionsDiv = document.getElementById(suggestionsId);
  let selectedFromList = false;

  function showSuggestions(cities) {
    suggestionsDiv.innerHTML = '';
    cities.forEach(city => {
      const item = document.createElement('div');
      item.className = 'suggestion-item';
      item.textContent = `${city.ciudad}, ${city.provincia}, ${city.pais}`;
      item.onmousedown = (e) => { e.preventDefault(); selectCity(city); };
      suggestionsDiv.appendChild(item);
    });
    suggestionsDiv.style.display = cities.length > 0 ? 'block' : 'none';
  }

  function selectCity(city) {
    input.value = city.ciudad;
    document.getElementById(provId).value = city.provincia;
    document.getElementById(paisId).value = city.pais;
    document.getElementById(latId).value = city.lat;
    document.getElementById(lonId).value = city.lon;
    suggestionsDiv.style.display = 'none';
    selectedFromList = true;
  }

  input.addEventListener('input', function() {
    const query = this.value.toLowerCase();
    if (query.length < 2) { suggestionsDiv.style.display = 'none'; return; }
    const results = ciudadesMundo.filter(c => c.ciudad.toLowerCase().includes(query) || c.provincia.toLowerCase().includes(query));
    showSuggestions(results.slice(0,8));
  });

  input.addEventListener('blur', () => setTimeout(() => suggestionsDiv.style.display = 'none', 300));
}

setupCityAutocomplete("ciudad","suggestions-ciudad","provincia","pais","lat","lon","warning-ciudad");
setupCityAutocomplete("ciudad_resi","suggestions-resi","provincia_resi","pais_resi","lat_resi","lon_resi","warning-resi");

// Env√≠o a Make
document.getElementById('formNH').addEventListener('submit', async function(e) {
  e.preventDefault();
  const data = new FormData(this);
  const json = Object.fromEntries(data.entries());
  try {
    const res = await fetch("https://hook.us2.make.com/6gjdmhgnwe3xb8xwabs2pflfv5qo40wj", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify(json)
    });
    if(res.ok){
      document.getElementById('mensaje-exito').style.display='block';
      this.reset();
    } else {
      document.getElementById('mensaje-error').style.display='block';
    }
  } catch(err){
    document.getElementById('mensaje-error').style.display='block';
  }
});
</script>
</body>
</html>
